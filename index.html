<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>mriiiron</title>
    <link rel="stylesheet" type="text/css" href="./css/style.css">
</head>

<body>

    <div class="resizable-wrapper">
        <canvas id="canvas" style="width:100%;height:100%"></canvas>
    </div>

    <script src="./js/wesa.js"></script>
    
    <script>
    
        var sprites = [
            { action: 2, x: 20, y: 80 },
            { action: 3, x: -70, y: 80 },
            { action: 2, x: -35, y: 70 },
            { action: 3, x: 110, y: 70 },
            { action: 2, x: -100, y: 40 },
            { action: 2, x: 120, y: 30 },
            { action: 2, x: -160, y: 25 },
            { action: 3, x: 50, y: 15 },
            { action: 3, x: 170, y: 10 },
            { action: 5, x: -40, y: 0 },
            { action: 1, x: 60, y: -25 }
        ];
    
        function resizeCanvas(canvas) {
            if (canvas.width != canvas.clientWidth || canvas.height != canvas.clientHeight) {
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
                wesa.core.canvasResize();
            }
        }
    
        var canvas = document.getElementById('canvas');
        
        // Initialize WESA
        wesa.core.init(canvas);
        
        // Set background to white;
        wesa.core.handle.gl.clearColor(1.0, 1.0, 1.0, 1.0);
        
        // Adding assets ready for loading
        wesa.assets.source.spriteSheetUrlArray.push('./assets/sprites.png');
        wesa.assets.source.objectJsonUrl = './assets/objects.json';
        
        // Load assets
        wesa.assets.load(function () {
        
            // Create the scene
            var scene = new wesa.Scene('Scene');
            
            for (let i = 0; i < sprites.length; i++) {
                let s = sprites[i];
                scene.addSpriteToLayer(0, new wesa.Sprite({
                    object: wesa.assets.objectList[0],
                    action: s.action,
                    team: 0,
                    position: { x: s.x, y: s.y },
                    scale: 5
                }));
            }

            // Run the scene
            var animate = function () {
                resizeCanvas(canvas);
                requestAnimationFrame(animate);
                scene.update();
                scene.render();
            }
            animate();
            
        });

    </script>
    
</body>

</html>
