<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <link href="https://fonts.googleapis.com/css?family=Cabin+Sketch|Love+Ya+Like+A+Sister" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="./css/style.css" rel="stylesheet" type="text/css" />
    <title>mriiiron | Caiyi Zhong</title>
</head>

<body>
    <div id="side">
        <div class="brand-wrap">
            <div class="brand-sub">Hi, I'm</div>
            <div class="brand">CAIYI<br />ZHONG</div>
            <br />
            <div class="brand-sub">aka "mriiiron"</div>
            <ul class="social-media-links">
                <li><a target="_blank" href="https://github.com/mriiiron"><i class="fa fa-github"></i></a></li>
                <li><a target="_blank" href="https://www.linkedin.com/in/caiyizhong/"><i class="fa fa-linkedin-square"></i></a></li>
                <li><a target="_blank" href="https://www.pinterest.ch/mriiiron/"><i class="fa fa-pinterest"></i></a></li>
                <li><a target="_blank" href="https://www.instagram.com/mriiiron/"><i class="fa fa-instagram"></i></a></li>
            </ul>
        </div>
    </div>
    <div id="main">
        <div class="spacer"></div>
        <div class="content">
            <canvas id="canvas" style="width:100%;height:100%;"></canvas>
        </div>
    </div>
    
    <script src="./wesa/js/wesa.js"></script>
    <script>
    
        function getRandomIntInclusive(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
    
        function resizeCanvas(canvas) {
            if (canvas.width != canvas.clientWidth || canvas.height != canvas.clientHeight) {
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
                wesa.core.canvasResize();
            }
        }
    
        var canvas = document.getElementById('canvas');
        var mouse = { x: 0, y: 0, isIn: false };
        
        canvas.onmouseenter = function(e) {
            mouse.isIn = true;
        };
        
        canvas.onmouseleave = function(e) {
            mouse.isIn = false;
        };
        
        canvas.onmousemove = function(e) {
            mouse.x = e.pageX - canvas.offsetLeft - canvas.width / 2;
            mouse.y = canvas.height / 2 - (e.pageY - canvas.offsetTop);
        };
        
        // Initialize WESA
        wesa.core.init(canvas);
        
        // Adding assets ready for loading
        wesa.assets.source.spriteSheetUrlArray.push('./wesa/assets/texture/ripple.png');
        wesa.assets.source.objectJsonUrl = './wesa/assets/ripple.json';
        
        // Load assets
        wesa.assets.load(function () {
        
            // Create the scene
            var scene = new wesa.Scene('Scene');

            // Run the scene
            var animate = function () {
                resizeCanvas(canvas);
                
                if (mouse.isIn) {
                    let x = mouse.x + getRandomIntInclusive(-120, 120);
                    let y = mouse.y + getRandomIntInclusive(-90, 90);
                    let action = getRandomIntInclusive(0, 1);
                    let sprite = new wesa.Sprite({
                        object: wesa.assets.objectList[0],
                        action: action,
                        team: 0,
                        position: { x: x, y: y },
                        scale: 1
                    });
                    scene.addSpriteToLayer(0, sprite);
                }

                requestAnimationFrame(animate);
                scene.update();
                scene.render();
            }
            animate();
            
        });
    
    </script>
    
</body>

</html>
